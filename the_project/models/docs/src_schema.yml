version: 2

sources:
  - name: raw
    database: "{{ env_var('DB_NAME', 'postgres') }}"
    schema: "{{ env_var('DB_SCHEMA', 'public') }}"
    config:
      freshness:
        warn_after:
          period: hour
          count: 6
    loaded_at_field: "created_at"
    tables:
      - name: raw_products
        description: "Raw/source products table"
      - name: raw_customers
        description: "Raw/source customers table"
      - name: raw_customers_delayed
        description: "Simulates late arriving IDs to be excluded in staging"
      - name: raw_orders
        description: "Raw/source heap orders' table: no index, PK or FK"
        loaded_at_field: "order_purchased_at"
      - name: raw_order_items
        description: "Raw/source heap orders' items table: no index, PK or FK"
        freshness: null
      - name: raw_orders_delayed
        description: "Simulates late arriving IDs to be excluded in staging"
